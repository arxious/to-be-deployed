<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>arxious</title>
  <meta name="description" content="Arman's developer portfolio — sleek, fast, and minimal." />
  <meta name="theme-color" content="#0b0d10" />

  <!-- Favicons: desktop + hi‑DPI + inline SVG fallback -->
  <link rel="icon" href="/favicon.ico?v=3" sizes="any" type="image/x-icon" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png?v=3" />
  <link rel="icon" type="image/png" sizes="192x192" href="/favicon-192.png?v=3" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png?v=3" />

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #0b0d10;
      --panel: rgba(255,255,255,0.04);
      --text: #e6e9ef;
      --muted: #9aa4b2;
      --brand-1: #7c3aed; /* violet */
      --brand-2: #22d3ee; /* cyan */
      --ring: rgba(34, 211, 238, 0.45);
      --radius: 16px;
      --shadow-1: 0 6px 20px rgba(0,0,0,0.35);
      --shadow-2: 0 12px 40px rgba(0,0,0,0.45);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, rgba(124,58,237,0.14), transparent 55%),
                  radial-gradient(1000px 700px at -10% 10%, rgba(34,211,238,0.12), transparent 60%),
                  var(--bg);
      background-attachment: fixed;
      line-height: 1.6;
    }

    a { text-decoration: none; color: inherit; }

    .container { width: min(1120px, 92vw); margin: 0 auto; }

    /* NAV */
    .nav { position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(140%) blur(10px);
      background: linear-gradient(to bottom, rgba(11,13,16,0.9), rgba(11,13,16,0.6)); border-bottom: 1px solid rgba(255,255,255,0.06); }
    .nav-inner { display: flex; align-items: center; justify-content: space-between; padding: 14px 0; }
    .brand { display: flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: 0.2px; }
    .brand .dot { width: 10px; height: 10px; border-radius: 999px; background: linear-gradient(135deg, var(--brand-1), var(--brand-2)); box-shadow: 0 0 18px rgba(34,211,238,0.5); }
    .nav a { color: var(--muted); }
    .nav a:hover { color: var(--text); }
    .nav-links { display: flex; gap: 18px; align-items: center; }

    .btn { appearance: none; border: 0; cursor: pointer; padding: 10px 14px; border-radius: 12px; font-weight: 600;
      color: #0b0d10; background: linear-gradient(135deg, var(--brand-2), var(--brand-1)); transition: transform .15s ease, box-shadow .2s ease, filter .2s ease; box-shadow: 0 6px 20px rgba(124,58,237,0.35); }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
    .btn:active { transform: translateY(0); filter: brightness(0.98); }
    .btn.ghost { color: var(--text); background: transparent; border: 1px solid rgba(255,255,255,0.12); box-shadow: none; }

    /* Sections */
    .hero { padding: 48px 0 24px; }
    .hero-grid { display: grid; grid-template-columns: 1.3fr 0.7fr; gap: 28px; align-items: center; }
    .eyebrow { display: inline-flex; align-items: center; gap: 10px; color: var(--muted); font-weight: 600; font-size: 13px; letter-spacing: 0.4px; text-transform: uppercase; }
    .pulse { width: 8px; height: 8px; border-radius: 999px; background: var(--brand-2); box-shadow: 0 0 0 0 rgba(34,211,238,0.6); animation: pulse 2.4s infinite; }
    @keyframes pulse { to { box-shadow: 0 0 0 16px rgba(34,211,238,0); } }

    .section { padding: 28px 0 18px; }
    .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 14px; }
    .section h2 { margin: 0; font-size: 20px; letter-spacing: 0.2px; }
    .muted { color: var(--muted); }

    .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 14px; }
    .col-4 { grid-column: span 4; }
    .col-6 { grid-column: span 6; }

    .card { position: relative; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); border: 1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius); box-shadow: var(--shadow-1); padding: 18px; min-height: 120px; overflow: clip; transition: transform .18s ease, box-shadow .2s ease, border-color .18s ease; }
    .card::before { content: ""; position: absolute; inset: 0 0 auto 0; height: 2px; background: linear-gradient(90deg, transparent, var(--brand-2), var(--brand-1), transparent); opacity: .4; }
    .card:hover { transform: translateY(-2px); box-shadow: var(--shadow-2); border-color: rgba(255,255,255,0.18); }

    .title { font-weight: 700; margin: 2px 0 6px; }
    .desc { color: var(--muted); font-size: 14px; }

    footer { padding: 32px 0 64px; color: var(--muted); }
    .footer-grid { display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 16px; }

    /* Contact UI */
    .contact-form { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .contact-form label { font-size: 12px; color: var(--muted); display:block; margin-bottom:6px; }
    .input, .textarea { width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.04); color: var(--text); }
    .textarea { min-height: 120px; resize: vertical; }
    .contact-actions { display:flex; justify-content:flex-end; gap:10px; margin-top:6px; }
    .notice { display:none; margin-top:10px; padding:10px 12px; border:1px solid rgba(16,185,129,.35); background:rgba(16,185,129,.12); color:#bbf7d0; border-radius:12px; }

    /* Admin */
    .admin-wrap { max-width: 920px; margin: 0 auto; }
    .admin-nav { display:flex; gap:10px; margin-bottom:12px; }
    .field { display: grid; grid-template-columns: 180px 1fr; gap: 12px; align-items: center; margin-bottom: 12px; }
    .field input, .field textarea, .field select { padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.04); color: var(--text); }
    .tag-chip { display:inline-block; padding:6px 8px; border-radius:999px; border:1px solid rgba(255,255,255,0.14); margin-right:6px; font-size:12px; color: var(--muted); }

    @media (max-width: 900px) { .hero-grid { grid-template-columns: 1fr; } .field { grid-template-columns: 1fr; } .contact-form { grid-template-columns: 1fr; } }
    :focus-visible { outline: 2px solid var(--ring); outline-offset: 2px; border-radius: 10px; }
  </style>
</head>
<body>
  <!-- NAVIGATION -->
  <nav class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <a href="#/" aria-label="arxious.dev home" style="color: var(--text);">arxious.dev</a>
      </div>
      <div class="nav-links">
        <a href="#/projects">Projects</a>
        <a href="#/experience">Experience</a>
        <a href="#/contact">Contact</a>
        <a class="btn ghost" href="#/admin" title="Admin portal">Admin</a>
      </div>
    </div>
  </nav>

  <!-- MAIN (client-side routes) -->
  <main id="app"></main>

  <footer>
    <div class="container footer-grid">
      <div>© <span id="y"></span> arxious.dev — Built with ♥ and Docker</div>
      <div class="row">
        <a class="muted" href="https://github.com" target="_blank" rel="noreferrer">GitHub</a>
        <a class="muted" href="#">LinkedIn</a>
        <a class="muted" href="#/contact">Email</a>
      </div>
    </div>
  </footer>

  <script>
    // helpers
    const el = (html) => { const t = document.createElement('template'); t.innerHTML = html.trim(); return t.content.firstChild; };

    // --- state & persistence ---
    const state = {
      cfg: JSON.parse(localStorage.getItem('arx_cfg') || '{}')
    };
    // defaults
    if (!Array.isArray(state.cfg.projects)) {
      state.cfg.projects = [
        { title: 'Personal Portfolio', desc: 'Dockerized static site with Nginx on Railway, custom domain & SSL.', tags: ['Docker','Nginx','Railway'] },
        { title: 'Secure Notes API', desc: 'Go service with JWT auth & rate limiting. Container-first workflow.', tags: ['Go','Postgres','Docker'] }
      ];
    }
    function saveCfg() { localStorage.setItem('arx_cfg', JSON.stringify(state.cfg)); }

    // --- favicon robustness ---
    const svgFav = 'data:image/svg+xml;utf8,' + encodeURIComponent(
      `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
         <defs>
           <radialGradient id="g" cx=".7" cy=".2" r="1">
             <stop offset="0" stop-color="#1c1f24"/>
             <stop offset="1" stop-color="#0b0d10"/>
           </radialGradient>
         </defs>
         <rect x="4" y="4" width="56" height="56" rx="14" fill="url(#g)"/>
         <text x="32" y="44" text-anchor="middle" font-family="Inter,Arial,Helvetica,sans-serif" font-size="40" fill="#fff">a</text>
       </svg>`
    );

    function setFavicon(url) {
      const head = document.head;
      head.querySelectorAll('link[rel*="icon"]').forEach(n => n.remove());
      const link = document.createElement('link');
      link.rel = 'icon';
      link.href = url;
      head.appendChild(link);
    }
    function tryFaviconSequence() {
      // try .ico → png → inline svg
      const tests = ['/favicon.ico?v=3','/favicon-32.png?v=3'];
      (function next(){
        if (!tests.length) { setFavicon(svgFav); return; }
        const u = tests.shift();
        const img = new Image();
        img.onload = () => setFavicon(u);
        img.onerror = next;
        img.src = u;
      })();
    }

    // --- views ---
    function Home() {
      const tagline = state.cfg.tagline || 'Developer • Security‑minded • Builder';
      const node = el(`
        <div>
          <header class="hero">
            <div class="container hero-grid">
              <div>
                <span class="eyebrow"><span class="pulse"></span> ${tagline}</span>
                <div class="row" style="margin-top:12px;">
                  <a class="btn" href="#/projects">View Projects</a>
                  <a class="btn ghost" href="#/contact">Get in touch</a>
                  <span class="code-chip">docker build -t arxious.dev .</span>
                </div>
              </div>
            </div>
          </header>

          <section id="projects" class="section">
            <div class="container">
              <div class="section-header">
                <h2>Projects</h2>
                <p class="muted">A few things I'm proud of.</p>
              </div>
              <div class="grid" id="proj-grid"></div>
            </div>
          </section>

          <section id="contact" class="section">
            <div class="container">
              <div class="section-header">
                <h2>Contact</h2>
                <p class="muted">Say hello — I'm open to collabs and internships.</p>
              </div>
              <div class="card">
                <form id="contactForm" class="contact-form" onsubmit="return false;">
                  <div>
                    <label for="cName">Name</label>
                    <input id="cName" class="input" type="text" placeholder="Your name" required />
                  </div>
                  <div>
                    <label for="cEmail">Email</label>
                    <input id="cEmail" class="input" type="email" placeholder="you@domain.com" required />
                  </div>
                  <div style="grid-column:1/-1;">
                    <label for="cSubject">Subject</label>
                    <input id="cSubject" class="input" type="text" placeholder="Subject" required />
                  </div>
                  <div style="grid-column:1/-1;">
                    <label for="cMsg">Message</label>
                    <textarea id="cMsg" class="textarea" placeholder="Tell me a bit about your project..." required></textarea>
                  </div>
                  <div class="contact-actions" style="grid-column:1/-1;">
                    <button class="btn ghost" type="reset">Clear</button>
                    <button class="btn" type="submit">Send</button>
                  </div>
                  <div id="contactNotice" class="notice">Thanks! Your message has been recorded locally (demo mode).</div>
                </form>
              </div>
            </div>
          </section>
        </div>
      `);

      // render projects
      const grid = node.querySelector('#proj-grid');
      state.cfg.projects.forEach(p => {
        const tags = (p.tags||[]).map(t=>`<span class="tag-chip">${t}</span>`).join('');
        grid.appendChild(el(`
          <article class="card col-6">
            <div class="title">${p.title}</div>
            <p class="desc">${p.desc||''}</p>
            <div class="spacer"></div>
            <div class="row">${tags}</div>
          </article>
        `));
      });

      // contact form behavior (demo only)
      node.querySelector('#contactForm').addEventListener('submit', () => {
        const n = document.getElementById('contactNotice');
        n.style.display = 'block';
        setTimeout(()=> n.style.display='none', 3000);
      });

      return node;
    }

    function Admin() {
      const node = el(`
        <div class="section">
          <div class="container admin-wrap">
            <div class="section-header">
              <h2>Admin Portal</h2>
              <p class="muted">Tweak site UI and manage projects. Settings persist in your browser for now.</p>
            </div>

            <div class="admin-nav">
              <a class="btn ghost" href="#/admin">General</a>
              <a class="btn ghost" href="#/admin/projects">Projects</a>
            </div>

            <div class="card" id="adminContent"></div>
          </div>
        </div>
      `);

      const content = node.querySelector('#adminContent');
      if (location.hash.includes('projects')) {
        // projects editor
        const listHtml = state.cfg.projects.map((p,i)=>`
          <div class="field">
            <label>Project ${i+1}</label>
            <div>
              <input data-i="${i}" data-k="title" type="text" placeholder="Title" value="${p.title||''}" style="margin-bottom:8px; width:100%">
              <textarea data-i="${i}" data-k="desc" placeholder="Description" style="margin-bottom:8px; width:100%">${p.desc||''}</textarea>
              <input data-i="${i}" data-k="tags" type="text" placeholder="Tags (comma-separated)" value="${(p.tags||[]).join(', ')}" style="width:100%">
            </div>
          </div>`).join('');

        content.appendChild(el(`
          <div>
            ${listHtml || '<p class="muted">No projects yet.</p>'}
            <div class="row" style="justify-content:flex-end; gap:8px;">
              <button class="btn ghost" id="addProj">Add Project</button>
              <button class="btn" id="saveProj">Save Projects</button>
            </div>
          </div>
        `));

        content.querySelector('#addProj')?.addEventListener('click', () => {
          state.cfg.projects.push({ title: '', desc: '', tags: [] });
          saveCfg();
          location.reload();
        });
        content.querySelector('#saveProj')?.addEventListener('click', () => {
          content.querySelectorAll('input[data-k], textarea[data-k]').forEach(elm => {
            const i = +elm.dataset.i, k = elm.dataset.k;
            if (k === 'tags') {
              state.cfg.projects[i].tags = elm.value.split(',').map(s=>s.trim()).filter(Boolean);
            } else {
              state.cfg.projects[i][k] = elm.value;
            }
          });
          saveCfg();
          alert('Saved!');
        });
      } else {
        // general settings
        content.appendChild(el(`
          <div>
            <div class="field">
              <label for="tagline">Tagline</label>
              <input id="tagline" type="text" placeholder="Developer • Security‑minded • Builder" value="${state.cfg.tagline || ''}">
            </div>
            <div class="row" style="justify-content:flex-end; gap:8px;">
              <button class="btn" id="saveCfg">Save Settings</button>
            </div>
          </div>
        `));
        content.querySelector('#saveCfg').addEventListener('click', () => {
          state.cfg.tagline = document.getElementById('tagline').value.trim() || undefined;
          saveCfg();
          location.hash = '#/';
          render();
        });
      }

      return node;
    }

    function NotFound() { return el('<div class="container section"><p class="muted">Page not found.</p></div>'); }

    function route() {
      const hash = location.hash.replace(/^#\/?/, '');
      if (!hash || hash === '') return { view: Home };
      if (hash.startsWith('admin')) return { view: Admin };
      if (hash.startsWith('projects') || hash.startsWith('experience') || hash.startsWith('contact')) return { view: Home };
      return { view: NotFound };
    }

    function render() {
      const root = document.getElementById('app');
      root.innerHTML = '';
      const { view } = route();
      root.appendChild(view());
    }

    window.addEventListener('hashchange', render);
    document.getElementById('y').textContent = new Date().getFullYear();

    // Initial render + favicon sequence
    render();
    tryFaviconSequence();
  </script>
</body>
</html>
